{
    "url": "https://archive.mozilla.org/pub/nspr/releases/v4.36/src/nspr-4.36.tar.gz",
    "ref": "4.36",
    "source_folder": "nspr",
    "build_configs": [
        {
            "pattern": "*linux*",
            "patches": [
                "fix_negative_array_size.patch"
            ],
            "build_system": "makefiles",
            "library_type": "shared",
            "env_vars": [],
            "pre_configure": [
                "sed -i '/^RELEASE/s|^|#|' ${SOURCE_DIR}/nspr/pr/src/misc/Makefile.in",
                "sed -i 's|$(LIBRARY) ||' ${SOURCE_DIR}/nspr/config/rules.mk"
            ],
            "fix_build": [
                "cmake -E copy ${BUILD_DIR}/../dev/config/nsinstall ${BUILD_DIR}/config"
            ],
            "options": [
                "--host=${HOST}",
                "--enable-64bit",
                "--with-pthreads",
                "--with-mozilla",
                "$([ $(uname -m) = x86_64 ] && echo --enable-64bit)"
            ]
        }
    ]
}