{
    "url": "https://gh-proxy.com/github.com/libffi/libffi/releases/download/v3.4.8/libffi-3.4.8.tar.gz",
    "ref": "v3.4.8",
    "build_configs": [
        {
            "pattern": "*linux*",
            "build_tools": [
                "autoconf"
            ],
            "patches": [],
            "build_system": "makefiles",
            "library_type": "shared",
            "options": [
                "--host=${HOST}",
                "--disable-docs",
                "--enable-portable-binary",
                "--disable-multi-os-directory"
            ]
        },
        {
            "pattern": "*windows*",
            "build_system": "makefiles",
            "library_type": "shared",
            "patches": [],
            "pre_install": [
                "cmake -E rename ${BUILD_DIR}/.libs/libffi-8.lib ${BUILD_DIR}/.libs/libffi.lib"
            ],
            "post_install": [
                "cmake -E make_directory ${PACKAGE_DIR}/bin",
                "cmake -E copy ${BUILD_DIR}/.libs/libffi.lib ${PACKAGE_DIR}/lib/libffi.lib",
                "cmake -E rename ${PACKAGE_DIR}/lib/libffi-8.dll ${PACKAGE_DIR}/bin/libffi-8.dll"
            ],
            "options": [
                "CC=\"${SOURCE_DIR}/msvcc.sh -m64\"",
                "CXX=\"${SOURCE_DIR}/msvcc.sh -m64\"",
                "LD=link",
                "CPP=\"cl -nologo -EP\"",
                "CXXCPP=\"cl -nologo -EP\"",
                "CPPFLAGS=\"-DFFI_BUILDING_DLL\"",
                "--host=${HOST}",
                "--disable-docs",
                "--enable-portable-binary",
                "--disable-multi-os-directory",
                "--disable-dependency-tracking"
            ]
        }
    ]
}